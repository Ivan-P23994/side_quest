<div id="flash-messages"></div>
<!-- app/views/applications/index.html.erb -->
<div class="max-w-3xl mx-auto mt-10">
  <h1 class="text-2xl font-bold mb-6">
    Applications for <span class="text-indigo-600"><%= @quest.title %></span>
  </h1>

  <% if @applications.any? %>
    <div class="overflow-x-auto bg-white rounded-xl shadow">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">Email</th>
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">Status</th>
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">Applied At</th>
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100" id="applications-list">
          <% @applications.each do |application| %>
            <%= render "application_card", application: application %>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <div class="py-8 text-center text-gray-500">
      No applications yet for this quest.
    </div>
  <% end %>

  <!-- Processed Applications Table -->
  <h2 class="text-xl font-semibold mt-12 mb-4 text-gray-700">Processed Applications</h2>

  <div class="overflow-x-auto bg-white rounded-xl shadow">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">Email</th>
          <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">Status</th>
          <th class="px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase">Applied At</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-100" id="processed-applications-list">
        <% if @processed_applications.any? %>
          <% @processed_applications.each do |application| %>
            <%= render "processed_application", application: application%>
          <% end %>
        <% end %>
      </tbody>
    </table>
  </div>

  <div class="mt-8">
    <%= link_to  "Back to Quest", quests_path(mission_id: @quest.mission.id), class: "btn btn-primary mr-2"%>
  </div>
</div>
